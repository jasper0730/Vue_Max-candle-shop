(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21d8fabc"],{"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("da84"),n=c("d039"),r=c("e8b5"),l=c("861d"),d=c("7b0b"),s=c("07fa"),i=c("8418"),b=c("65f0"),u=c("1dde"),p=c("b622"),h=c("2d00"),m=p("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",f=o.TypeError,g=h>=51||!n((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),N=u("concat"),E=function(e){if(!l(e))return!1;var t=e[m];return void 0!==t?!!t:r(e)},V=!g||!N;a({target:"Array",proto:!0,forced:V},{concat:function(e){var t,c,a,o,n,r=d(this),l=b(r,0),u=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?r:arguments[t],E(n)){if(o=s(n),u+o>j)throw f(O);for(c=0;c<o;c++,u++)c in n&&i(l,u,n[c])}else{if(u>=j)throw f(O);i(l,u++,n)}return l.length=u,l}})},f3af:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"container"},n={class:"pt-3 pb-5"},r=Object(a["createElementVNode"])("h3",{class:"mt-3 mb-4 fw-bold"},"購物車",-1),l={class:"row"},d={class:"col-md-8"},s={class:"table"},i=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{width:"40%",class:"border-0 ps-0"},"品項"),Object(a["createElementVNode"])("th",{width:"25%",class:"border-0"},"數量"),Object(a["createElementVNode"])("th",{width:"20%",class:"border-0"},"金額"),Object(a["createElementVNode"])("th",{width:"15%",class:"border-0"})])],-1),b={class:"border-0 px-0 py-4"},u={class:"row d-flex align-items-center"},p={class:"col-md-5"},h=["src"],m={class:"col-md-7"},j={class:""},O={class:"border-0 align-middle",style:{"max-width":"160px"}},f={class:"d-flex flex-nowrap align-items-center"},g=["onClick"],N=Object(a["createElementVNode"])("i",{class:"bi bi-dash-lg"},null,-1),E=[N],V=["onClick"],v=Object(a["createElementVNode"])("i",{class:"bi bi-plus-lg"},null,-1),y=[v],w={class:"border-0 align-middle"},k={class:"mb-0 ms-auto"},x={class:"border-0 align-middle"},C=["onClick"],D=Object(a["createElementVNode"])("i",{class:"bi bi-x-lg"},null,-1),L=[D],S={key:0,class:"my-5 text-center fs-5"},$={class:"input-group w-100 mb-3"},_=["disabled"],q={class:"input-group-append"},B=["disabled"],M={key:0},T={key:1},J={class:"col-md-4"},P={class:"border p-4 mb-4"},U=Object(a["createElementVNode"])("h4",{class:"fw-bold mb-4"},"訂購明細",-1),z={class:"table text-muted border-bottom"},A=Object(a["createElementVNode"])("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 費用 ",-1),F={class:"text-end border-0 px-0 pt-4"},R=Object(a["createElementVNode"])("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣 ",-1),G={class:"text-end border-0 px-0 pt-0 pb-4"},H={class:"d-flex justify-content-between mt-4"},I=Object(a["createElementVNode"])("p",{class:"mb-0 h4 fw-bold"},"總金額",-1),K={class:"mb-0 h4 fw-bold"},Q=["disabled"],W=Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-dark w-100 mt-2 rounded"}," 繼續購物 ",-1);function X(e,t,c,N,v,D){var X=Object(a["resolveComponent"])("Loading"),Y=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createVNode"])(X,{active:v.isLoading,"z-index":1060},null,8,["active"]),Object(a["createElementVNode"])("div",n,[r,Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("table",s,[i,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(v.cartData.carts,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"border-bottom border-top",key:t.id},[Object(a["createElementVNode"])("td",b,[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("img",{src:t.product.imageUrl,alt:"產品圖片",style:{width:"72px",height:"72px"},class:"d-none d-md-block object-fit"},null,8,h)]),Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("p",j,Object(a["toDisplayString"])(t.product.title),1)])])]),Object(a["createElementVNode"])("td",O,[Object(a["createElementVNode"])("div",f,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded me-1",onClick:function(e){return D.handleSub(t)}},E,8,g),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(t.qty)+" ",1),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded ms-1",onClick:function(e){return D.handlePlus(t)}},y,8,V)])]),Object(a["createElementVNode"])("td",w,[Object(a["createElementVNode"])("p",k," NT$ "+Object(a["toDisplayString"])(e.$filters.currency(t.total)),1)]),Object(a["createElementVNode"])("td",x,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark border-0 py-2 rounded",onClick:Object(a["withModifiers"])((function(e){return D.deleteSingle(t.id)}),["prevent"])},L,8,C)])])})),128))])]),v.cartData.carts.length?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",S," 目前沒有商品，請加入購物車，謝謝您 ")),Object(a["createElementVNode"])("div",$,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control rounded shadow-none bg-light",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=function(e){return v.coupon_code=e}),disabled:v.cartData.final_total!==v.cartData.total||!v.cartData.carts.length},null,8,_),[[a["vModelText"],v.coupon_code]]),Object(a["createElementVNode"])("div",q,[Object(a["createElementVNode"])("button",{class:"btn btn-dark rounded",type:"button",id:"button-addon2",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(){return D.addCoupon&&D.addCoupon.apply(D,arguments)}),["prevent"])),disabled:v.useCoupon||!v.coupon_code||v.cartData.final_total!==v.cartData.total||!v.cartData.carts.length},[v.useCoupon||v.cartData.final_total!==v.cartData.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",M,"已套用優惠券")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",T,"套用優惠券"))],8,B)])])]),Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("div",P,[U,Object(a["createElementVNode"])("table",z,[Object(a["createElementVNode"])("tbody",null,[Object(a["createElementVNode"])("tr",null,[A,Object(a["createElementVNode"])("td",F," NT$ "+Object(a["toDisplayString"])(e.$filters.currency(v.cartData.total)),1)]),Object(a["createElementVNode"])("tr",null,[R,Object(a["createElementVNode"])("td",G,Object(a["toDisplayString"])(e.$filters.currency(v.cartData.final_total-v.cartData.total)),1)])])]),Object(a["createElementVNode"])("div",H,[I,Object(a["createElementVNode"])("p",K," NT$ "+Object(a["toDisplayString"])(e.$filters.currency(Math.round(v.cartData.final_total))),1)]),Object(a["createVNode"])(Y,{to:"/check"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-dark w-100 mt-4 rounded",disabled:!v.cartData.carts.length}," 結帳 ",8,Q)]})),_:1}),Object(a["createVNode"])(Y,{to:"/products"},{default:Object(a["withCtx"])((function(){return[W]})),_:1})])])])])])}c("99af");var Y=c("4dcd"),Z={data:function(){return{cartData:{carts:[]},isLoading:!1,qty:1,coupon_code:"helloworld520",useCoupon:!1}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart");this.$http.get(t).then((function(t){e.isLoading=!1,Y["a"].emit("get-cart"),e.cartData=t.data.data})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"購物車")}))},deleteSingle:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart/").concat(e);this.$http.delete(c).then((function(e){t.isLoading=!1,t.getCart(),t.$httpMessageState(e,"移除")})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"移除")}))},handleSub:function(e){var t=this;if(e.qty>1){this.isLoading=!0,this.qty=e.qty-1;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart/").concat(e.id),a={data:{product_id:e.id,qty:this.qty}};this.$http.put(c,a).then((function(){t.isLoading=!1,t.getCart()})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response)}))}else this.deleteSingle(e.id)},handlePlus:function(e){var t=this;if(e.qty>0){this.isLoading=!0,this.qty=e.qty+1;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart/").concat(e.id),a={data:{product_id:e.id,qty:this.qty}};this.$http.put(c,a).then((function(){t.isLoading=!1,t.getCart()})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response)}))}},addCoupon:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/coupon"),c={data:{code:this.coupon_code}};this.$http.post(t,c).then((function(t){e.isLoading=!1,e.useCoupon=t.data.success,e.getCart(),e.$httpMessageState(t,"套用優惠券"),e.coupon_code=""})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"套用優惠券")}))}},mounted:function(){this.getCart()}},ee=c("6b0d"),te=c.n(ee);const ce=te()(Z,[["render",X]]);t["default"]=ce}}]);
//# sourceMappingURL=chunk-21d8fabc.54ce1c3e.js.map